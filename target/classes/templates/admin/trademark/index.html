 <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="dynamic(main)">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="Dashboard">
<meta name="keyword"
	content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
<title>GoalShop-Admin</title>

<!-- Favicons -->
<link href="/assets/admin/img/favicon.png" rel="icon">
<link href="/assets/admin/img/apple-touch-icon.png" rel="apple-touch-icon">
<link rel="stylesheet" type="text/css"
	href="https://code.highcharts.com/css/highcharts.css">
<!-- Bootstrap core CSS -->
<link href="/assets/admin/lib/bootstrap/css/bootstrap.min.css"
	rel="stylesheet">
<!--external css-->
<link href="/assets/admin/lib/font-awesome/css/font-awesome.css"
	rel="stylesheet" />
<link rel="stylesheet" type="text/css"
	href="/assets/admin/css/zabuto_calendar.css">
<link rel="stylesheet" type="text/css"
	href="/assets/admin/lib/gritter/css/jquery.gritter.css" />
<!-- Custom styles for this template -->
<link href="/assets/admin/css/style.css" rel="stylesheet">
<link href="/assets/admin/css/style-responsive.css" rel="stylesheet">
<script type="text/javascript"
	src="https://www.gstatic.com/charts/loader.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<link rel="stylesheet" type="text/css"
	href="https://code.highcharts.com/css/highcharts.css">



</head>

<body ng-app="admin-ctrl">
	<section id="container">
		<div th:replace="/admin/layout/_header.html"></div>
		<div th:replace="/admin/layout/_aside.html"></div>
		<section id="main-content">
			<section class="wrapper">
				<div>

					<div class="row mt" ng-controller="trademark-ctrl">
						<div class="col-md-6">
							<div class="white-panel ">
								<div class="panel-heading">
									<div class="pull-left">
										<h4>
											<i class="fa fa-tasks"></i> THƯƠNG HIỆU
										</h4>
									</div>
									<br>
								</div>
								<div class="custom-check goleft mt  ">

									<table class="table table-hover " id="tbl_exporttable_to_xls">
										<h4>
											&emsp;<i class="fa fa-angle-right"></i> Danh sách các thương
											hiệu
										</h4>
										<hr>
										<thead>
											<tr>

												<th>Mã Thương hiệu</th>
												<th>Tên thương hiệu</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="item in pager.items" ng-click="edit(item)">

												<td>{{item.trademark_id}}</td>
												<td>{{item.name}}</td>
												<td></td>
											</tr>
										</tbody>

									</table>
									<div class=" text-center">
										<button ng-click="pager.first()" class="btn btn-theme03">
											<b class="glyphicon glyphicon-hand-up"></b>
										</button>
										<button ng-click="pager.prev()" class="btn btn-theme03">
											<b class="glyphicon glyphicon-hand-left"></b>
										</button>
										<button class="btn btn-theme03">{{pager.page + 1}} of
											{{pager.count}}</button>
										<button ng-click="pager.next()" class="btn btn-theme03">
											<b class="glyphicon glyphicon-hand-right"></b>
										</button>
										<button ng-click="pager.last()" class="btn btn-theme03">
											<b class="glyphicon glyphicon-hand-down"></b>
										</button>
										
									</div>
								</div>
							</div>

							<!-- /table-responsive -->
						</div>
						<!--/ White-panel -->
						<div class="col-md-6">
							<div class="white-panel ">
								<div class="panel-heading">
									<div class="pull-left">
										<h4>
											<i class="fa fa-tasks"></i> CHI TIẾT
										</h4>
									</div>
									<br>
								</div>
								<div class="custom-check goleft mt  ">
									<table class="table table-hover " id="tbl_exporttable_to_xls">
										<h4>
											&emsp;<i class="fa fa-angle-right"></i> Chỉnh sửa
										</h4>
										<hr>
										<form role="form" class="form-horizontal style-form">

											<div>

												<label>Mã Thương hiệu</label> <input
													ng-model="form.trademark_id" class="form-control" readonly />
											</div>

											<div>
												<label>Tên thương hiệu</label> <input ng-model="form.name"
													class="form-control" />
											</div>

											<div>
												<label for="story">Thông tin thêm</label>
												<textarea class="form-control" ng-model="form.detail"
													id="story" name="story" rows="5">
								</textarea>
											</div>


										<div class="form-group" style="margin-top: 10px;">

												<div class="col-lg-offset-2 col-lg-10">

													<button class="btn btn-theme02" data-toggle="modal"
														data-target="#myModal1">
														<b class="glyphicon glyphicon-plus"></b>Thêm mới
													</button>
													<!-- Modal -->
													<div class="modal fade" id="myModal1" tabindex="-1"
														role="dialog" aria-labelledby="myModalLabel"
														aria-hidden="true">
														<div class="modal-dialog">
															<div class="modal-content">
																<div class="modal-header">
																	<button type="button" class="close"
																		data-dismiss="modal" aria-hidden="true">&times;</button>
																	<h4 class="modal-title" id="myModalLabel">Thêm mới
																	</h4>
																</div>
																<div class="modal-body">Bạn có chắc thêm mới</div>
																<div class="modal-footer">
																	<button type="button" class="btn btn-default"
																		data-dismiss="modal">Đóng</button>
																	<button type="button" ng-click="create()"
																		class="btn btn-primary">Đồng ý</button>
																</div>
															</div>
														</div>
													</div>
													<button class="btn btn-theme" data-toggle="modal"
														data-target="#myModal">
														<b class="glyphicon glyphicon-save"></b>Cập nhập
													</button>
													<!-- Modal -->
													<div class="modal fade" id="myModal" tabindex="-1"
														role="dialog" aria-labelledby="myModalLabel"
														aria-hidden="true">
														<div class="modal-dialog">
															<div class="modal-content">
																<div class="modal-header">
																	<button type="button" class="close"
																		data-dismiss="modal" aria-hidden="true">&times;</button>
																	<h4 class="modal-title" id="myModalLabel">Cập nhập
																	</h4>
																</div>
																<div class="modal-body">Bạn có chắc thay đổi</div>
																<div class="modal-footer">
																	<button type="button" class="btn btn-default"
																		data-dismiss="modal">Đóng</button>
																	<button type="button" ng-click="update()"
																		class="btn btn-primary">Đồng ý</button>
																</div>
															</div>
														</div>
													</div>
													<button class="btn btn-theme04" data-toggle="modal"
														data-target="#myModal2">
														<b class="glyphicon glyphicon-trash"></b>Xóa
													</button>
													<!-- Modal -->
													<div class="modal fade" id="myModal2" tabindex="-1"
														role="dialog" aria-labelledby="myModalLabel"
														aria-hidden="true">
														<div class="modal-dialog">
															<div class="modal-content">
																<div class="modal-header">
																	<button type="button" class="close"
																		data-dismiss="modal" aria-hidden="true">&times;</button>
																	<h4 class="modal-title" id="myModalLabel">Xóa</h4>
																</div>
																<div class="modal-body">Bạn có chắc muốn xóa</div>
																<div class="modal-footer">
																	<button type="button" class="btn btn-default"
																		data-dismiss="modal">Đóng</button>
																	<button type="button" ng-click="delete(form)"
																		class="btn btn-primary">Đồng ý</button>
																</div>
															</div>
														</div>
													</div>

													<button ng-click="reset()" class="btn btn-theme01">
														<b class="glyphicon glyphicon-refresh"></b>Làm mới
													</button>

												</div>
											</div>
										</form>
									</table>
								</div>
							</div>
						</div>
					</div>

					<div class="row mt">
						<div class="col-md-6">
							<div class="white-panel ">
								<div class="panel-heading">

									<div id="char"></div>

								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="white-panel ">
								<div class="panel-heading">
									<div id="piechart"></div>
								</div>
							</div>
						</div>
					</div>




				</div>
			</section>
		</section>
		<div th:replace="/admin/layout/_footer.html"></div>
	</section>
	<script src="/assets/admin/lib/jquery/jquery.min.js"></script>
	<script src="/assets/admin/js/admin.js"></script>
	<script src="/assets/admin/lib/bootstrap/js/bootstrap.min.js"></script>
	<script class="include" type="text/javascript"
		src="/assets/admin/lib/jquery.dcjqaccordion.2.7.js"></script>
	<script src="/assets/admin/lib/jquery.scrollTo.min.js"></script>
	<script src="/assets/admin/lib/jquery.nicescroll.js" type="text/javascript"></script>
	<script src="/assets/admin/lib/jquery.sparkline.js"></script>
	<!--common script for all pages-->
	<script src="/assets/admin/lib/common-scripts.js"></script>
	<script type="text/javascript"
		src="/assets/admin/lib/gritter/js/jquery.gritter.js"></script>
	<script type="text/javascript" src="/assets/admin/lib/gritter-conf.js"></script>
	<!--script for this page-->
	<script src="/assets/admin/lib/sparkline-chart.js"></script>
	<script src="/assets/admin/lib/zabuto_calendar.js"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"></script>


	<script type="application/javascript">
		
        $(document).ready(function() {
            $("#date-popover").popover({
                html: true,
                trigger: "manual"
            });
            $("#date-popover").hide();
            $("#date-popover").click(function(e) {
                $(this).hide();
            });

            $("#my-calendar").zabuto_calendar({
                action: function() {
                    return myDateFunction(this.id, false);
                },
                action_nav: function() {
                    return myNavFunction(this.id);
                },
                ajax: {
                    url: "show_data.php?action=1",
                    modal: true
                },
                legend: [{
                    type: "text",
                    label: "Special event",
                    badge: "00"
                }, {
                    type: "block",
                    label: "Regular event",
                }]
            });
        });

        function myNavFunction(id) {
            $("#date-popover").hide();
            var nav = $("#" + id).data("navigation");
            var to = $("#" + id).data("to");
            console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
        }
    
	</script>
	<script>
		$.ajax({
			url : "/getdata1",
			success : function(result) {
				var seri = [];

				var data = [];

				var datacolumn1 = [];
				var datacolumn2 = [];
				var name_category = [];
				console.log(result);
				for (var i = 0; i < result.length; i++) {
					var cates = {};
					cates = result[i].group;
					name_category.push(cates);
				}
				for (var i = 0; i < result.length; i++) {
					var colum = {};
					colum = result[i].sum;
					datacolumn1.push(colum);
				}
				for (var i = 0; i < result.length; i++) {
					var colum = {};
					colum = result[i].count;
					datacolumn2.push(colum);
				}

				for (var i = 0; i < result.length; i++) {
					var object = {};
					object.name = result[i].group;
					object.y = result[i].sum;
					data.push(object);
				}

				var seriObject = {
					name : 'Tổng giá',
					colorByPoint : true,
					data : data,
					showInLegend : true
				}

				seri.push(seriObject);
				drawColumnChart(datacolumn1, datacolumn2, name_category);
				drawPieChart(seri);

			}
		});

		function drawColumnChart(datacolumn1, datacolumn2, name_category) {
			Highcharts
					.chart(
							'char',
							{

								chart : {
									type : 'column',
									styledMode : true
								},

								title : {
									text : 'Thống kê hàng trong kho theo thương hiệu  '
								},
								xAxis : {
									categories : name_category,
									title : {
										text : 'Thương hiệu '
									}
								},
								yAxis : [ {
									className : 'highcharts-color-0',
									title : {
										text : 'Tổng tiền Đ'
									}
								}, {
									className : 'highcharts-color-1',
									opposite : true,
									title : {
										text : 'Số lượng (cái)'
									}
								} ],

								plotOptions : {
									column : {
										borderRadius : 5
									}
								},

								series : [ {
									name : 'Tổng tiền (Đ) ',
									data : datacolumn1
								}, {
									name : 'Số lượng (chiếc) ',
									data : datacolumn2,
									yAxis : 1
								} ]

							});
		}

		function drawPieChart(seri) {
			Highcharts
					.chart(
							'piechart',
							{
								chart : {
									type : 'pie',
									styledMode : true
								},

								title : {
									text : 'Thống kê  hàng tồn trong theo thương hiệu '
								},
								tooltip : {
									pointFormat : '<tr><td style="color:{series.color};padding:0">{series.name}: </td>'
											+ '<td style="padding:0"><b>{point.y:.0f} Đ</b>||<b>{point.percentage:.1f}%</b></td></tr>',
								},
								series : seri
							});
		}
	</script>

	<script>
		function ExportToExcel(type, fn, dl) {
			var elt = document.getElementById('tbl_exporttable_to_xls');
			var wb = XLSX.utils.table_to_book(elt, {
				sheet : "sheet1"
			});
			return dl ? XLSX.write(wb, {
				bookType : type,
				bookSST : true,
				type : 'base64'
			}) : XLSX.writeFile(wb, fn
					|| ('Danhsachthuonghieu.' + (type || 'xlsx')));
		}
	</script>
</body>

</html>